<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Confirmation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
            background: #00212A;
        }
        
        .confirmation-container {
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            margin: auto;
        }
        #seatList {
            list-style-position: inside;  /* Moves bullet point closer to text */
            padding-left: 0;  /* Removes default padding */
            margin: 0;  /* Removes default margin */
        }
        
        
        .download-btn {
            margin-top: 20px;
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        .download-btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="confirmation-container" id="printSection">
        <h2>Booking Confirmation</h2>
        <p><strong>User Name:</strong> <span id="userName"></span></p>
        <p><strong>Email:</strong> <span id="userEmail"></span></p>
        <p><strong>Booking Time:</strong> <span id="bookingTime"></span></p>
        <p><strong>Floor Number:</strong> <span id="floorNumber"></span></p>
        <p><strong>Number of Seats Booked:</strong> <span id="totalSeats"></span></p>
        <p><strong>Booked Seats:</strong></p>
        <ul id="seatList"></ul>
        <p>Thank you for reserving your seats.</p>
    </div>

    <button class="download-btn" onclick="downloadPDF()">Download as PDF</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        function loadBookingDetails() {
            // Retrieve stored details
            let bookedSeats = JSON.parse(sessionStorage.getItem('bookedSeats')) || [];
            let floor = sessionStorage.getItem('floor') || "N/A";
            let userName = sessionStorage.getItem('userName') || "Guest User";
            let userEmail = sessionStorage.getItem('userEmail') || "Not provided";
            let bookingTime = sessionStorage.getItem('bookingTime') || new Date().toLocaleString();
            
            // Display user details
            document.getElementById('userName').textContent = userName;
            document.getElementById('userEmail').textContent = userEmail;
            document.getElementById('bookingTime').textContent = bookingTime;
            document.getElementById('floorNumber').textContent = floor;
            document.getElementById('totalSeats').textContent = bookedSeats.length; // Number of seats booked

            // Display booked seats
            let seatList = document.getElementById('seatList');
            seatList.innerHTML = bookedSeats.length > 0 
                ? bookedSeats.map(seat => `<li>Seat ${seat}</li>`).join('') 
                : "<li>No seats booked.</li>";
        }

        function downloadPDF() {
            const element = document.getElementById('printSection');
            html2pdf().from(element).save("Seat_Booking_Details.pdf");
        }

        window.onload = loadBookingDetails;
    </script>
</body>
</html>
